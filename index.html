<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>WalkMe</title>
    <link rel="stylesheet" href="css/ionic.min.css">
    <link rel="stylesheet" href="css/style.css">

    <script src="js/angular.min.js"></script>
    <script src="js/ionic.min.js"></script>
    <script src="js/ionic-angular.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.2/underscore-min.js"></script>
    <!--    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBt1EnZ9lAjCx6nOu4iqUtFQ9sKnjOvGCE"></script>-->
    <script src="js/lodash.js"></script>
    <script src="js/angular-google-maps.min.js"></script>
    <script src="js/map.js"></script>
    <script src="js/app.js"></script>

</head>

<body ng-app="walkMeApp">
    <ion-view>
        <ion-header-bar class="bar bar-header bar-positive item-input-inset">
            <h1 class="title">WalkMe</h1>
        </ion-header-bar>

        <ion-content class="has-header">
            <div class="list">
                <form id="searchForm" method="GET">
                    <label class="item item-input" onkeypress="submitOnEnter(event);">
                        <input type="text" id="startpt" name="startpt" placeholder="Choose starting point..." autofocus autocomplete="off">
                    </label>
                    <label class="item item-input" onkeypress="submitOnEnter(event);">
                        <input type="text" name="endpt" placeholder="Choose destination...">
                    </label>
                </form>
            </div>
        </ion-content>

        <div ng-controller="mapController" id="map-canvas">
            <ui-gmap-google-map center="map.center" zoom="map.zoom" options="options"></ui-gmap-google-map>
        </div>

        <ion-footer-bar class="bar bar-footer">
            <button class="button button-positive" id="btn_geolocate"><i class="icon ion-navigate"></i>Get My Location</button>
        </ion-footer-bar>
    </ion-view>

    <script>
        function submitOnEnter(e) {
            // look for window.event in case event isn't passed in
            e = e || window.event;
            if (e.keyCode == 13) {
                out = document.getElementById('startpt').value;

                var req = new XMLHttpRequest();
                var url = "http://104.236.249.124/api/";

                req.onreadystatechange = function () {
                    if (req.readyState == 4 && req.status == 200) {
                        var res = JSON.parse(req.responseText);
                        console.log(res);
                    }
                }
                req.open("GET", url + out, true);
                req.send();

                document.getElementById('searchForm').reset();
            }

        }
    </script>
</body>

</html>